# 文件系统的权限管理

## 1.背景介绍

* UNIX/Linux系统采用了经典的用户-组-其他(User-Group-Others, UGO)权限模型,通过读(read, `r`)、写(write, `w`)、执行(execute, `x`)三种基本权限组合,赋予文件或目录不同的访问权限.
* 每个文件或目录都关联一个所有者(owner)、所属组(group),以及其他用户(others),每类用户对应一套权限设置.

* 在文件系统中,权限管理是一个关键特性,它控制着不同用户对文件和目录的访问.
* 本文档将介绍如何在基于FUSE的用户空间文件系统中实现权限管理.

## 2.文件和目录权限

在Linux系统中,每个文件和目录都有一组权限,决定了谁可以读、写或执行它们.这些权限通常表示为一个字符串,如`-rwxr-xr--`,其中:

- 第一个字符表示文件类型(如`-`代表普通文件,`d`代表目录).
- 接下来的三个字符**rwx**分别代表文件所有者的读(r)、写(w)和执行(x)权限.
- 紧随其后的三个字符**r-x**代表文件所属组的权限.
- 最后三个字符**r--**代表其他所有用户的权限.

> 当新创建文件和目录时,就由**umask**来设置新创建的文件和目录的默认权限.

## 3.切换用户

有时,需要具有另一个用户的身份.比如我们想要得到超级用户特权,来执行一些管理任务,有时比如说测试一个帐号,也需要变成另一个普通用户. 有三种方式,可以拥有多重身份:

- **注销系统并以其他用户身份重新登录系统**
  - 这个注销登录其他用户和 Windows 是差不多的,所以这里就不介绍了.
- **使用 su 命令**
  - 如,使用 `su + 用户名` 命令切换到其他用户.需输入要切换成用户的用户密码,切换过去完成了相应的任务后,可以使用 `exit` 命令退出,重新回到之前的用户.
- **使用 sudo 命令**
  - sudo 命令主要是使用 **root 用户**来执行命令,命令格式是:`sudo + 命令`.使用 sudo 时需输入的密码不是 root 用户的密码,而是当前用户的密码.
